<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Helpful Functions | NEON Ecological Forecasting Challenge</title>
  <meta name="description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Helpful Functions | NEON Ecological Forecasting Challenge" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://seankross.com/bookdown-start/" />
  
  <meta property="og:description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  <meta name="github-repo" content="eco4cast/neon4cast-docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Helpful Functions | NEON Ecological Forecasting Challenge" />
  
  <meta name="twitter:description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  

<meta name="author" content="Hosted by the Ecological Forecasting Initative Research Coordination Network and supported by National Science Foundation (DEB-1926388)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="met_inputs.html"/>
<link rel="next" href="using-the-challenge-in-classes.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NEON Ecological Forecasting Challenge</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction" id="toc-introduction">Introduction<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#theme-aquatic-ecosystems" id="toc-theme-aquatic-ecosystems"><span class="toc-section-number">1</span> Theme: Aquatic Ecosystems<span></span></a>
<ul>
<li><a href="theme-aquatic-ecosystems.html#overview" id="toc-overview"><span class="toc-section-number">1.1</span> Overview<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#challenge" id="toc-challenge"><span class="toc-section-number">1.2</span> Challenge<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#data-targets" id="toc-data-targets"><span class="toc-section-number">1.3</span> Data: Targets<span></span></a>
<ul>
<li><a href="theme-aquatic-ecosystems.html#surface-mean-daily-dissolved-oxygen-concentration" id="toc-surface-mean-daily-dissolved-oxygen-concentration"><span class="toc-section-number">1.3.1</span> Surface Mean Daily Dissolved Oxygen Concentration<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#surface-mean-daily-water-temperature" id="toc-surface-mean-daily-water-temperature"><span class="toc-section-number">1.3.2</span> Surface Mean Daily Water Temperature<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#chlorophyll-a" id="toc-chlorophyll-a"><span class="toc-section-number">1.3.3</span> Chlorophyll-a<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#focal-sites" id="toc-focal-sites"><span class="toc-section-number">1.3.4</span> Focal sites<span></span></a></li>
</ul></li>
<li><a href="theme-aquatic-ecosystems.html#timeline" id="toc-timeline"><span class="toc-section-number">1.4</span> Timeline<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#observed-data-latency" id="toc-observed-data-latency"><span class="toc-section-number">1.5</span> Observed data latency<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#submissions" id="toc-submissions"><span class="toc-section-number">1.6</span> Submissions<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#meterological-inputs-for-modeling" id="toc-meterological-inputs-for-modeling"><span class="toc-section-number">1.7</span> Meterological inputs for modeling<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#useful-functions" id="toc-useful-functions"><span class="toc-section-number">1.8</span> Useful functions<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#expanded-observations-data" id="toc-expanded-observations-data"><span class="toc-section-number">1.9</span> Expanded observations data<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#null-models" id="toc-null-models"><span class="toc-section-number">1.10</span> Null models<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#faq" id="toc-faq"><span class="toc-section-number">1.11</span> FAQ<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#design-team" id="toc-design-team"><span class="toc-section-number">1.12</span> Design Team<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#partners" id="toc-partners"><span class="toc-section-number">1.13</span> Partners<span></span></a></li>
<li><a href="theme-aquatic-ecosystems.html#references" id="toc-references"><span class="toc-section-number">1.14</span> References<span></span></a></li>
</ul></li>
<li><a href="theme-carbon-and-water-fluxes.html#theme-carbon-and-water-fluxes" id="toc-theme-carbon-and-water-fluxes"><span class="toc-section-number">2</span> Theme: Carbon and Water Fluxes<span></span></a>
<ul>
<li><a href="theme-carbon-and-water-fluxes.html#overview-1" id="toc-overview-1"><span class="toc-section-number">2.1</span> Overview<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#challenge-1" id="toc-challenge-1"><span class="toc-section-number">2.2</span> Challenge<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#data-targets-1" id="toc-data-targets-1"><span class="toc-section-number">2.3</span> Data: Targets<span></span></a>
<ul>
<li><a href="theme-carbon-and-water-fluxes.html#net-ecosystem-exchange" id="toc-net-ecosystem-exchange"><span class="toc-section-number">2.3.1</span> Net ecosystem exchange<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#latent-heat-flux" id="toc-latent-heat-flux"><span class="toc-section-number">2.3.2</span> Latent heat flux<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#focal-sites-1" id="toc-focal-sites-1"><span class="toc-section-number">2.3.3</span> Focal sites<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#minute-target-data-calculation" id="toc-minute-target-data-calculation"><span class="toc-section-number">2.3.4</span> 30-minute target data calculation<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#daily-target-data-calculation" id="toc-daily-target-data-calculation"><span class="toc-section-number">2.3.5</span> Daily target data calculation<span></span></a></li>
</ul></li>
<li><a href="theme-carbon-and-water-fluxes.html#timeline-1" id="toc-timeline-1"><span class="toc-section-number">2.4</span> Timeline<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#flux-data-latency" id="toc-flux-data-latency"><span class="toc-section-number">2.5</span> Flux data latency<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#submissions-1" id="toc-submissions-1"><span class="toc-section-number">2.6</span> Submissions<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#meterological-inputs-for-modeling-1" id="toc-meterological-inputs-for-modeling-1"><span class="toc-section-number">2.7</span> Meterological inputs for modeling<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#useful-functions-1" id="toc-useful-functions-1"><span class="toc-section-number">2.8</span> Useful functions<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#null-models-1" id="toc-null-models-1"><span class="toc-section-number">2.9</span> Null models<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#faq-1" id="toc-faq-1"><span class="toc-section-number">2.10</span> FAQ<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#design-team-1" id="toc-design-team-1"><span class="toc-section-number">2.11</span> Design team<span></span></a></li>
<li><a href="theme-carbon-and-water-fluxes.html#partners-1" id="toc-partners-1"><span class="toc-section-number">2.12</span> Partners<span></span></a></li>
</ul></li>
<li><a href="theme-tick-populations.html#theme-tick-populations" id="toc-theme-tick-populations"><span class="toc-section-number">3</span> Theme: Tick Populations<span></span></a>
<ul>
<li><a href="theme-tick-populations.html#overview-2" id="toc-overview-2"><span class="toc-section-number">3.1</span> Overview<span></span></a></li>
<li><a href="theme-tick-populations.html#challenge-2" id="toc-challenge-2"><span class="toc-section-number">3.2</span> Challenge<span></span></a></li>
<li><a href="theme-tick-populations.html#data-targets-2" id="toc-data-targets-2"><span class="toc-section-number">3.3</span> Data: Targets<span></span></a>
<ul>
<li><a href="theme-tick-populations.html#amblyomma-americanum-nymphs" id="toc-amblyomma-americanum-nymphs"><span class="toc-section-number">3.3.1</span> Amblyomma americanum nymphs<span></span></a></li>
<li><a href="theme-tick-populations.html#focal-sites-2" id="toc-focal-sites-2"><span class="toc-section-number">3.3.2</span> Focal sites<span></span></a></li>
<li><a href="theme-tick-populations.html#target-data-calculation" id="toc-target-data-calculation"><span class="toc-section-number">3.3.3</span> Target data calculation<span></span></a></li>
<li><a href="theme-tick-populations.html#target-file" id="toc-target-file"><span class="toc-section-number">3.3.4</span> Target file<span></span></a></li>
</ul></li>
<li><a href="theme-tick-populations.html#timeline-2" id="toc-timeline-2"><span class="toc-section-number">3.4</span> Timeline<span></span></a></li>
<li><a href="theme-tick-populations.html#submissions-2" id="toc-submissions-2"><span class="toc-section-number">3.5</span> Submissions<span></span></a></li>
<li><a href="theme-tick-populations.html#meterological-inputs-for-modeling-2" id="toc-meterological-inputs-for-modeling-2"><span class="toc-section-number">3.6</span> Meterological inputs for modeling<span></span></a></li>
<li><a href="theme-tick-populations.html#useful-functions-2" id="toc-useful-functions-2"><span class="toc-section-number">3.7</span> Useful functions<span></span></a></li>
<li><a href="theme-tick-populations.html#null-models-2" id="toc-null-models-2"><span class="toc-section-number">3.8</span> Null models<span></span></a></li>
<li><a href="theme-tick-populations.html#faq-2" id="toc-faq-2"><span class="toc-section-number">3.9</span> FAQ<span></span></a></li>
<li><a href="theme-tick-populations.html#design-team-2" id="toc-design-team-2"><span class="toc-section-number">3.10</span> Design team<span></span></a></li>
<li><a href="theme-tick-populations.html#partners-2" id="toc-partners-2"><span class="toc-section-number">3.11</span> Partners<span></span></a></li>
</ul></li>
<li><a href="theme-phenology.html#theme-phenology" id="toc-theme-phenology"><span class="toc-section-number">4</span> Theme: Phenology<span></span></a>
<ul>
<li><a href="theme-phenology.html#overview-3" id="toc-overview-3"><span class="toc-section-number">4.1</span> Overview<span></span></a></li>
<li><a href="theme-phenology.html#challenge-3" id="toc-challenge-3"><span class="toc-section-number">4.2</span> Challenge<span></span></a></li>
<li><a href="theme-phenology.html#data-targets-3" id="toc-data-targets-3"><span class="toc-section-number">4.3</span> Data: Targets<span></span></a>
<ul>
<li><a href="theme-phenology.html#green-chromatic-coordinate-gcc" id="toc-green-chromatic-coordinate-gcc"><span class="toc-section-number">4.3.1</span> Green chromatic coordinate (gcc)<span></span></a></li>
<li><a href="theme-phenology.html#red-chromatic-coordinate-rcc" id="toc-red-chromatic-coordinate-rcc"><span class="toc-section-number">4.3.2</span> Red chromatic coordinate (rcc)<span></span></a></li>
<li><a href="theme-phenology.html#focal-sites-3" id="toc-focal-sites-3"><span class="toc-section-number">4.3.3</span> Focal sites<span></span></a></li>
<li><a href="theme-phenology.html#target-data-calculation-1" id="toc-target-data-calculation-1"><span class="toc-section-number">4.3.4</span> Target data calculation<span></span></a></li>
<li><a href="theme-phenology.html#target-file-1" id="toc-target-file-1"><span class="toc-section-number">4.3.5</span> Target file<span></span></a></li>
</ul></li>
<li><a href="theme-phenology.html#timeline-3" id="toc-timeline-3"><span class="toc-section-number">4.4</span> Timeline<span></span></a></li>
<li><a href="theme-phenology.html#submissions-3" id="toc-submissions-3"><span class="toc-section-number">4.5</span> Submissions<span></span></a></li>
<li><a href="theme-phenology.html#meterological-inputs-for-modeling-3" id="toc-meterological-inputs-for-modeling-3"><span class="toc-section-number">4.6</span> Meterological inputs for modeling<span></span></a></li>
<li><a href="theme-phenology.html#useful-functions-3" id="toc-useful-functions-3"><span class="toc-section-number">4.7</span> Useful functions<span></span></a></li>
<li><a href="theme-phenology.html#null-models-3" id="toc-null-models-3"><span class="toc-section-number">4.8</span> Null models<span></span></a></li>
<li><a href="theme-phenology.html#faq-3" id="toc-faq-3"><span class="toc-section-number">4.9</span> FAQ<span></span></a></li>
<li><a href="theme-phenology.html#design-team-3" id="toc-design-team-3"><span class="toc-section-number">4.10</span> Design team<span></span></a></li>
<li><a href="theme-phenology.html#partners-3" id="toc-partners-3"><span class="toc-section-number">4.11</span> Partners<span></span></a></li>
<li><a href="theme-phenology.html#references-1" id="toc-references-1"><span class="toc-section-number">4.12</span> References<span></span></a></li>
</ul></li>
<li><a href="theme-beetle-communities.html#theme-beetle-communities" id="toc-theme-beetle-communities"><span class="toc-section-number">5</span> Theme: Beetle Communities<span></span></a>
<ul>
<li><a href="theme-beetle-communities.html#overview-4" id="toc-overview-4"><span class="toc-section-number">5.1</span> Overview<span></span></a></li>
<li><a href="theme-beetle-communities.html#challenge-4" id="toc-challenge-4"><span class="toc-section-number">5.2</span> Challenge<span></span></a></li>
<li><a href="theme-beetle-communities.html#data-targets-4" id="toc-data-targets-4"><span class="toc-section-number">5.3</span> Data: Targets<span></span></a>
<ul>
<li><a href="theme-beetle-communities.html#abundance-of-beetles-abundance" id="toc-abundance-of-beetles-abundance"><span class="toc-section-number">5.3.1</span> Abundance of beetles (abundance)<span></span></a></li>
<li><a href="theme-beetle-communities.html#species-richness-n" id="toc-species-richness-n"><span class="toc-section-number">5.3.2</span> Species richness (n)<span></span></a></li>
<li><a href="theme-beetle-communities.html#focal-sites-4" id="toc-focal-sites-4"><span class="toc-section-number">5.3.3</span> Focal sites<span></span></a></li>
<li><a href="theme-beetle-communities.html#target-data-calculation-2" id="toc-target-data-calculation-2"><span class="toc-section-number">5.3.4</span> Target data calculation<span></span></a></li>
<li><a href="theme-beetle-communities.html#target-file-2" id="toc-target-file-2"><span class="toc-section-number">5.3.5</span> Target file<span></span></a></li>
</ul></li>
<li><a href="theme-beetle-communities.html#timeline-4" id="toc-timeline-4"><span class="toc-section-number">5.4</span> Timeline<span></span></a></li>
<li><a href="theme-beetle-communities.html#design-team-4" id="toc-design-team-4"><span class="toc-section-number">5.5</span> Design team<span></span></a></li>
<li><a href="theme-beetle-communities.html#partners-4" id="toc-partners-4"><span class="toc-section-number">5.6</span> Partners<span></span></a></li>
<li><a href="theme-beetle-communities.html#references-2" id="toc-references-2"><span class="toc-section-number">5.7</span> References<span></span></a></li>
</ul></li>
<li><a href="participation.html#participation" id="toc-participation"><span class="toc-section-number">6</span> Participation<span></span></a>
<ul>
<li><a href="participation.html#participation-guidance" id="toc-participation-guidance"><span class="toc-section-number">6.1</span> Participation guidance<span></span></a>
<ul>
<li><a href="participation.html#how-to-participate" id="toc-how-to-participate"><span class="toc-section-number">6.1.1</span> How to participate<span></span></a></li>
<li><a href="participation.html#teams" id="toc-teams"><span class="toc-section-number">6.1.2</span> Teams<span></span></a></li>
<li><a href="participation.html#slack-and-github-communication" id="toc-slack-and-github-communication"><span class="toc-section-number">6.1.3</span> Slack and GitHub Communication<span></span></a></li>
<li><a href="participation.html#archiving-models" id="toc-archiving-models"><span class="toc-section-number">6.1.4</span> Archiving models<span></span></a></li>
<li><a href="participation.html#computational-resources" id="toc-computational-resources"><span class="toc-section-number">6.1.5</span> Computational resources<span></span></a></li>
</ul></li>
<li><a href="participation.html#participation-agreement" id="toc-participation-agreement"><span class="toc-section-number">6.2</span> Participation agreement<span></span></a></li>
<li><a href="participation.html#neon-data-use" id="toc-neon-data-use"><span class="toc-section-number">6.3</span> NEON Data Use<span></span></a></li>
<li><a href="participation.html#additional-data-options" id="toc-additional-data-options"><span class="toc-section-number">6.4</span> Additional data options<span></span></a></li>
</ul></li>
<li><a href="submission-instructions.html#submission-instructions" id="toc-submission-instructions"><span class="toc-section-number">7</span> Submission Instructions<span></span></a>
<ul>
<li><a href="submission-instructions.html#forecast-format" id="toc-forecast-format"><span class="toc-section-number">7.1</span> Forecast format<span></span></a>
<ul>
<li><a href="submission-instructions.html#examples-of-the-forecast-file-format." id="toc-examples-of-the-forecast-file-format."><span class="toc-section-number">7.1.1</span> Examples of the forecast file format.<span></span></a></li>
<li><a href="submission-instructions.html#ensemble-csv" id="toc-ensemble-csv"><span class="toc-section-number">7.1.2</span> Ensemble CSV<span></span></a></li>
<li><a href="submission-instructions.html#distribution-csv" id="toc-distribution-csv"><span class="toc-section-number">7.1.3</span> Distribution CSV<span></span></a></li>
<li><a href="submission-instructions.html#netcdf" id="toc-netcdf"><span class="toc-section-number">7.1.4</span> Netcdf<span></span></a></li>
</ul></li>
<li><a href="submission-instructions.html#metadata-format" id="toc-metadata-format"><span class="toc-section-number">7.2</span> Metadata format<span></span></a></li>
<li><a href="submission-instructions.html#submission-process" id="toc-submission-process"><span class="toc-section-number">7.3</span> Submission process<span></span></a></li>
<li><a href="submission-instructions.html#validating-submission" id="toc-validating-submission"><span class="toc-section-number">7.4</span> Validating submission<span></span></a></li>
<li><a href="submission-instructions.html#visualizing-submissions" id="toc-visualizing-submissions"><span class="toc-section-number">7.5</span> Visualizing submissions<span></span></a></li>
<li><a href="submission-instructions.html#video-describing-how-to-submit-to-the-challenge" id="toc-video-describing-how-to-submit-to-the-challenge"><span class="toc-section-number">7.6</span> Video Describing How to Submit to the Challenge<span></span></a></li>
</ul></li>
<li><a href="submission-metadata-generation.html#submission-metadata-generation" id="toc-submission-metadata-generation"><span class="toc-section-number">8</span> Submission Metadata Generation<span></span></a>
<ul>
<li><a href="submission-metadata-generation.html#team-information" id="toc-team-information"><span class="toc-section-number">8.1</span> Team information<span></span></a></li>
<li><a href="submission-metadata-generation.html#model-description" id="toc-model-description"><span class="toc-section-number">8.2</span> Model Description<span></span></a>
<ul>
<li><a href="submission-metadata-generation.html#initial-conditions" id="toc-initial-conditions"><span class="toc-section-number">8.2.1</span> Initial conditions<span></span></a></li>
<li><a href="submission-metadata-generation.html#drivers" id="toc-drivers"><span class="toc-section-number">8.2.2</span> Drivers<span></span></a></li>
<li><a href="submission-metadata-generation.html#parameters" id="toc-parameters"><span class="toc-section-number">8.2.3</span> Parameters<span></span></a></li>
<li><a href="submission-metadata-generation.html#random-effects" id="toc-random-effects"><span class="toc-section-number">8.2.4</span> Random effects<span></span></a></li>
<li><a href="submission-metadata-generation.html#process-error" id="toc-process-error"><span class="toc-section-number">8.2.5</span> Process error<span></span></a></li>
<li><a href="submission-metadata-generation.html#observation-error" id="toc-observation-error"><span class="toc-section-number">8.2.6</span> Observation error<span></span></a></li>
<li><a href="submission-metadata-generation.html#progation" id="toc-progation"><span class="toc-section-number">8.2.7</span> Progation<span></span></a></li>
<li><a href="submission-metadata-generation.html#assimilation" id="toc-assimilation"><span class="toc-section-number">8.2.8</span> assimilation<span></span></a></li>
</ul></li>
<li><a href="submission-metadata-generation.html#example-r-list" id="toc-example-r-list"><span class="toc-section-number">8.3</span> Example R “list”<span></span></a></li>
<li><a href="submission-metadata-generation.html#example" id="toc-example"><span class="toc-section-number">8.4</span> Example<span></span></a></li>
</ul></li>
<li><a href="evaluation.html#evaluation" id="toc-evaluation"><span class="toc-section-number">9</span> Evaluation<span></span></a>
<ul>
<li><a href="evaluation.html#results" id="toc-results"><span class="toc-section-number">9.1</span> Results<span></span></a></li>
<li><a href="evaluation.html#scoring-metric-continuous-ranked-probability-score" id="toc-scoring-metric-continuous-ranked-probability-score"><span class="toc-section-number">9.2</span> Scoring Metric: Continuous Ranked Probability Score<span></span></a>
<ul>
<li><a href="evaluation.html#example-of-a-crps-calculation-from-an-ensemble-forecast" id="toc-example-of-a-crps-calculation-from-an-ensemble-forecast"><span class="toc-section-number">9.2.1</span> Example of a CRPS calculation from an ensemble forecast<span></span></a></li>
<li><a href="evaluation.html#exploring-the-scoring-surface" id="toc-exploring-the-scoring-surface"><span class="toc-section-number">9.2.2</span> Exploring the scoring surface<span></span></a></li>
<li><a href="evaluation.html#crps-from-the-normal-distribution" id="toc-crps-from-the-normal-distribution"><span class="toc-section-number">9.2.3</span> CRPS from the Normal Distribution<span></span></a></li>
</ul></li>
<li><a href="evaluation.html#null-forecast" id="toc-null-forecast"><span class="toc-section-number">9.3</span> Null forecast<span></span></a></li>
<li><a href="evaluation.html#forecast-submission-visualization-and-leaderboard" id="toc-forecast-submission-visualization-and-leaderboard"><span class="toc-section-number">9.4</span> Forecast Submission Visualization and Leaderboard<span></span></a></li>
<li><a href="evaluation.html#references-3" id="toc-references-3"><span class="toc-section-number">9.5</span> References<span></span></a></li>
</ul></li>
<li><a href="met_inputs.html#met_inputs" id="toc-met_inputs"><span class="toc-section-number">10</span> Meteorology Inputs<span></span></a>
<ul>
<li><a href="met_inputs.html#noaa-global-ensemble-forecasting-system" id="toc-noaa-global-ensemble-forecasting-system"><span class="toc-section-number">10.1</span> NOAA Global Ensemble Forecasting System<span></span></a>
<ul>
<li><a href="met_inputs.html#stage-1" id="toc-stage-1"><span class="toc-section-number">10.1.1</span> Stage 1<span></span></a></li>
<li><a href="met_inputs.html#stage-2" id="toc-stage-2"><span class="toc-section-number">10.1.2</span> Stage 2<span></span></a></li>
<li><a href="met_inputs.html#stage-3" id="toc-stage-3"><span class="toc-section-number">10.1.3</span> Stage 3<span></span></a></li>
</ul></li>
<li><a href="met_inputs.html#neon-observed" id="toc-neon-observed"><span class="toc-section-number">10.2</span> NEON Observed<span></span></a></li>
<li><a href="met_inputs.html#downloading-and-processing-of-noaa-gefs" id="toc-downloading-and-processing-of-noaa-gefs"><span class="toc-section-number">10.3</span> Downloading and processing of NOAA GEFS<span></span></a></li>
</ul></li>
<li><a href="helpful-functions.html#helpful-functions" id="toc-helpful-functions"><span class="toc-section-number">11</span> Helpful Functions<span></span></a>
<ul>
<li><a href="helpful-functions.html#neon4cast-package" id="toc-neon4cast-package"><span class="toc-section-number">11.1</span> neon4cast package<span></span></a>
<ul>
<li><a href="helpful-functions.html#installation" id="toc-installation"><span class="toc-section-number">11.1.1</span> Installation<span></span></a></li>
<li><a href="helpful-functions.html#example-forecast" id="toc-example-forecast"><span class="toc-section-number">11.1.2</span> Example forecast<span></span></a></li>
<li><a href="helpful-functions.html#score-forecast-locally" id="toc-score-forecast-locally"><span class="toc-section-number">11.1.3</span> Score forecast locally<span></span></a></li>
<li><a href="helpful-functions.html#validate-a-forecast-file" id="toc-validate-a-forecast-file"><span class="toc-section-number">11.1.4</span> Validate a forecast file<span></span></a></li>
<li><a href="helpful-functions.html#generate-forecast-metadata-in-eml" id="toc-generate-forecast-metadata-in-eml"><span class="toc-section-number">11.1.5</span> Generate forecast metadata in EML<span></span></a></li>
<li><a href="helpful-functions.html#access-efi-snapshots-of-noaa-forecasts-at-neon-sites" id="toc-access-efi-snapshots-of-noaa-forecasts-at-neon-sites"><span class="toc-section-number">11.1.6</span> Access EFI snapshots of NOAA forecasts at NEON sites<span></span></a></li>
<li><a href="helpful-functions.html#neon4cast-submit" id="toc-neon4cast-submit"><span class="toc-section-number">11.1.7</span> Submit a forecast<span></span></a></li>
</ul></li>
<li><a href="helpful-functions.html#neonstore-package" id="toc-neonstore-package"><span class="toc-section-number">11.2</span> neonstore package<span></span></a>
<ul>
<li><a href="helpful-functions.html#installation-1" id="toc-installation-1"><span class="toc-section-number">11.2.1</span> Installation<span></span></a></li>
<li><a href="helpful-functions.html#quickstart" id="toc-quickstart"><span class="toc-section-number">11.2.2</span> Quickstart<span></span></a></li>
<li><a href="helpful-functions.html#database-backend" id="toc-database-backend"><span class="toc-section-number">11.2.3</span> Database backend<span></span></a></li>
<li><a href="helpful-functions.html#note-on-api-limits" id="toc-note-on-api-limits"><span class="toc-section-number">11.2.4</span> Note on API limits<span></span></a></li>
<li><a href="helpful-functions.html#non-stacking-files-and-low-level-interface" id="toc-non-stacking-files-and-low-level-interface"><span class="toc-section-number">11.2.5</span> Non-stacking files and low-level interface<span></span></a></li>
</ul></li>
<li><a href="helpful-functions.html#efistandards-package" id="toc-efistandards-package"><span class="toc-section-number">11.3</span> EFIstandards package<span></span></a>
<ul>
<li><a href="helpful-functions.html#output-files" id="toc-output-files"><span class="toc-section-number">11.3.1</span> Output Files:<span></span></a></li>
<li><a href="helpful-functions.html#output-metadata" id="toc-output-metadata"><span class="toc-section-number">11.3.2</span> Output Metadata:<span></span></a></li>
<li><a href="helpful-functions.html#archiving" id="toc-archiving"><span class="toc-section-number">11.3.3</span> Archiving:<span></span></a></li>
<li><a href="helpful-functions.html#vignettes" id="toc-vignettes"><span class="toc-section-number">11.3.4</span> Vignettes:<span></span></a></li>
<li><a href="helpful-functions.html#documentation" id="toc-documentation"><span class="toc-section-number">11.3.5</span> Documentation:<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="using-the-challenge-in-classes.html#using-the-challenge-in-classes" id="toc-using-the-challenge-in-classes"><span class="toc-section-number">12</span> Using the Challenge in Classes<span></span></a></li>
<li><a href="frequently-asked-questions.html#frequently-asked-questions" id="toc-frequently-asked-questions"><span class="toc-section-number">13</span> Frequently Asked Questions<span></span></a>
<ul>
<li><a href="frequently-asked-questions.html#my-model-uses-meterology-inputs.-where-can-i-find-forecasts-of-weather-to-use-in-my-ecological-forecast" id="toc-my-model-uses-meterology-inputs.-where-can-i-find-forecasts-of-weather-to-use-in-my-ecological-forecast"><span class="toc-section-number">13.1</span> My model uses meterology inputs. Where can I find forecasts of weather to use in my ecological forecast?<span></span></a></li>
<li><a href="frequently-asked-questions.html#i-need-historical-weather-data-to-build-my-model.-where-can-i-find-it" id="toc-i-need-historical-weather-data-to-build-my-model.-where-can-i-find-it"><span class="toc-section-number">13.2</span> I need historical weather data to build my model. Where can I find it?<span></span></a></li>
<li><a href="frequently-asked-questions.html#i-submitted-my-forecast-but-cannot-find-it-on-the-dashboard-or-in-the-directory-of-forecasts" id="toc-i-submitted-my-forecast-but-cannot-find-it-on-the-dashboard-or-in-the-directory-of-forecasts"><span class="toc-section-number">13.3</span> I submitted my forecast but cannot find it on the dashboard or in the directory of forecasts<span></span></a></li>
<li><a href="frequently-asked-questions.html#do-i-need-to-submit-forecasts-to-every-submission-date" id="toc-do-i-need-to-submit-forecasts-to-every-submission-date"><span class="toc-section-number">13.4</span> Do I need to submit forecasts to every submission date?<span></span></a></li>
<li><a href="frequently-asked-questions.html#where-can-i-find-examples-of-forecasts-that-match-the-required-standard" id="toc-where-can-i-find-examples-of-forecasts-that-match-the-required-standard"><span class="toc-section-number">13.5</span> Where can I find examples of forecasts that match the required standard?<span></span></a></li>
<li><a href="frequently-asked-questions.html#is-it-possible-to-automate-my-forecast-submissions" id="toc-is-it-possible-to-automate-my-forecast-submissions"><span class="toc-section-number">13.6</span> Is it possible to automate my forecast submissions?<span></span></a></li>
<li><a href="frequently-asked-questions.html#i-am-having-trouble-generating-the-metadata.-can-you-point-me-to-more-information-tutorials-or-examples" id="toc-i-am-having-trouble-generating-the-metadata.-can-you-point-me-to-more-information-tutorials-or-examples"><span class="toc-section-number">13.7</span> I am having trouble generating the metadata. Can you point me to more information, tutorials, or examples?<span></span></a></li>
<li><a href="frequently-asked-questions.html#how-many-years-are-you-planning-to-run-the-challenge" id="toc-how-many-years-are-you-planning-to-run-the-challenge"><span class="toc-section-number">13.8</span> How many years are you planning to run the Challenge?<span></span></a></li>
<li><a href="frequently-asked-questions.html#are-there-certain-types-of-models-that-i-need-to-use" id="toc-are-there-certain-types-of-models-that-i-need-to-use"><span class="toc-section-number">13.9</span> Are there certain types of models that I need to use?<span></span></a></li>
<li><a href="frequently-asked-questions.html#what-is-the-relationship-between-the-challenge-and-neon" id="toc-what-is-the-relationship-between-the-challenge-and-neon"><span class="toc-section-number">13.10</span> What is the relationship between the Challenge and NEON?<span></span></a></li>
<li><a href="frequently-asked-questions.html#i-am-interested-in-submitting-different-models-or-to-multiple-themes.-how-should-i-register-to-do-this" id="toc-i-am-interested-in-submitting-different-models-or-to-multiple-themes.-how-should-i-register-to-do-this"><span class="toc-section-number">13.11</span> I am interested in submitting different models or to multiple themes. How should I register to do this?<span></span></a></li>
<li><a href="frequently-asked-questions.html#where-can-i-find-resources-that-provide-how-to-participate-in-the-challenge" id="toc-where-can-i-find-resources-that-provide-how-to-participate-in-the-challenge"><span class="toc-section-number">13.12</span> Where can I find resources that provide how to participate in the Challenge?<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NEON Ecological Forecasting Challenge</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="helpful-functions" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">11</span> Helpful Functions<a href="helpful-functions.html#helpful-functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The following are resources to help you prepare your forecasts for submission.</p>
<p>The <a href="https://github.com/eco4cast/neon4cast" target="_blank">neon4cast</a> package provides a collection of convenient helper utilities so you can score your forecast locally, validate the format of your forecast files to check for formatting errors before submitting, generate forecast metadata in EML (coming soon!), access EFI snapshots of NOAA forecasts at NEON sites, and submit your forecast.</p>
<p>The <a href="https://github.com/cboettig/neonstore" target="_blank">neonstore</a> package provides quick access and persistent storage of NEON data tables.</p>
<p>The <a href="https://github.com/eco4cast/EFIstandards" target="_blank">EFIstandards</a> package summarizes the proposed community standards for the common formatting and archiving of ecological forecasts by the Ecological Forecasting Initiative. These standards are a work in progress. If you have suggestions for improvement share them with <a href="mailto:eco4cast.initiative@gmail.com" class="email">eco4cast.initiative@gmail.com</a>.”</p>
<div id="neon4cast-package" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> neon4cast package<a href="helpful-functions.html#neon4cast-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>neon4cast</code> package is located at <a href="https://github.com/eco4cast/neon4cast" class="uri">https://github.com/eco4cast/neon4cast</a></p>
<p><code>neon4cast</code> provides the following collection of convenient helper utilities for
anyone entering the EFI NEON Forecasting Challenge.</p>
<div id="installation" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Installation<a href="helpful-functions.html#installation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can install the development version from
<a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="helpful-functions.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;remotes&quot;)</span></span>
<span id="cb59-2"><a href="helpful-functions.html#cb59-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;eco4cast/neon4cast&quot;</span>)</span></code></pre></div>
</div>
<div id="example-forecast" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Example forecast<a href="helpful-functions.html#example-forecast" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="helpful-functions.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(neon4cast)</span>
<span id="cb60-2"><a href="helpful-functions.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb60-3"><a href="helpful-functions.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fable)</span>
<span id="cb60-4"><a href="helpful-functions.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span></code></pre></div>
<p>Download and read in the current target file for the Aquatics theme. For
convenience, we read this in as a timeseries object, noting that the
time is in the ‘time’ column, and timeseries are replicated over sites.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="helpful-functions.html#cb61-1" aria-hidden="true" tabindex="-1"></a>aquatic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://data.ecoforecast.org/neon4cast-targets/aquatics/aquatics-targets.csv.gz&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="helpful-functions.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>time, <span class="at">key=</span>siteID)</span></code></pre></div>
<p>Create a 35 day forecast for each variable, <code>oxygen</code>, and <code>temperature</code>.
For illustrative purposes, we’ll use the <code>fable</code> package because it is
concise and well documented. We make separate forecasts for each of the
two variables before reformatting them and combining them. Note the use
of <code>efi_format</code> helper function from the <code>neon4cast</code> package, which
merely replaces the special <code>&lt;S3:distribution&gt;</code> column used by fable
with something we can write to text: either columns with a mean/sd (for
normal distributions) or otherwise random draws from the distributions.</p>
<p>So that we can score our forecast right away instead of waiting for next
month’s data, we will filter out the most recent data available first.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="helpful-functions.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop last 35 days and use explicit NAs for gaps in timeseries</span></span>
<span id="cb62-2"><a href="helpful-functions.html#cb62-2" aria-hidden="true" tabindex="-1"></a>blinded_aquatic <span class="ot">&lt;-</span> aquatic <span class="sc">%&gt;%</span> <span class="fu">filter</span>(time <span class="sc">&lt;</span> <span class="fu">max</span>(time) <span class="sc">-</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span> <span class="fu">fill_gaps</span>()</span>
<span id="cb62-3"><a href="helpful-functions.html#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="helpful-functions.html#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A simple random walk forecast, see ?fable::RW</span></span>
<span id="cb62-5"><a href="helpful-functions.html#cb62-5" aria-hidden="true" tabindex="-1"></a>oxygen_fc <span class="ot">&lt;-</span> blinded_aquatic <span class="sc">%&gt;%</span></span>
<span id="cb62-6"><a href="helpful-functions.html#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">null =</span> <span class="fu">RW</span>(oxygen)) <span class="sc">%&gt;%</span></span>
<span id="cb62-7"><a href="helpful-functions.html#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&quot;35 days&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-8"><a href="helpful-functions.html#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">efi_format</span>()</span>
<span id="cb62-9"><a href="helpful-functions.html#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="helpful-functions.html#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="do">## also use random walk for temperature</span></span>
<span id="cb62-11"><a href="helpful-functions.html#cb62-11" aria-hidden="true" tabindex="-1"></a>temperature_fc <span class="ot">&lt;-</span> blinded_aquatic  <span class="sc">%&gt;%</span></span>
<span id="cb62-12"><a href="helpful-functions.html#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">null =</span> <span class="fu">RW</span>(temperature)) <span class="sc">%&gt;%</span></span>
<span id="cb62-13"><a href="helpful-functions.html#cb62-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&quot;35 days&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-14"><a href="helpful-functions.html#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">efi_format</span>()</span>
<span id="cb62-15"><a href="helpful-functions.html#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="helpful-functions.html#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="co"># combine into single table, drop the .model column</span></span>
<span id="cb62-17"><a href="helpful-functions.html#cb62-17" aria-hidden="true" tabindex="-1"></a>forecast <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(oxygen_fc, temperature_fc) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>.model)</span>
<span id="cb62-18"><a href="helpful-functions.html#cb62-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-19"><a href="helpful-functions.html#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Write the forecast to a file following EFI naming conventions:</span></span>
<span id="cb62-20"><a href="helpful-functions.html#cb62-20" aria-hidden="true" tabindex="-1"></a>forecast_file <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{theme}-{date}-{team}.csv.gz&quot;</span>,</span>
<span id="cb62-21"><a href="helpful-functions.html#cb62-21" aria-hidden="true" tabindex="-1"></a>                            <span class="at">theme =</span> <span class="st">&quot;aquatics&quot;</span>, </span>
<span id="cb62-22"><a href="helpful-functions.html#cb62-22" aria-hidden="true" tabindex="-1"></a>                            <span class="at">date=</span><span class="fu">Sys.Date</span>(),</span>
<span id="cb62-23"><a href="helpful-functions.html#cb62-23" aria-hidden="true" tabindex="-1"></a>                            <span class="at">team =</span> <span class="st">&quot;example_null&quot;</span>)</span>
<span id="cb62-24"><a href="helpful-functions.html#cb62-24" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(forecast, forecast_file)</span></code></pre></div>
</div>
<div id="score-forecast-locally" class="section level3 hasAnchor" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Score forecast locally<a href="helpful-functions.html#score-forecast-locally" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scores for valid forecasts should appear at
<a href="https://shiny.ecoforecast.org" class="uri">https://shiny.ecoforecast.org</a> the day after they are submitted.
However, it is often more convenient to generate scores locally. Note
that the “score” simply the <code>crps_sample</code> (for ensemble forecasts) or
<code>crps_norm</code> (for summary statistic forecasts) score from the
<code>scoringRules</code> R package, for each unique prediction
(i.e.day/site/variable tuple).</p>
<p>Note that scores are only possible once the data becomes available in
the corresponding targets file!</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="helpful-functions.html#cb63-1" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">score</span>(forecast, <span class="at">theme =</span> <span class="st">&quot;aquatics&quot;</span>)</span>
<span id="cb63-2"><a href="helpful-functions.html#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="helpful-functions.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The resulting data.frame scores each day for each site, but is also easy to summarize:</span></span>
<span id="cb63-4"><a href="helpful-functions.html#cb63-4" aria-hidden="true" tabindex="-1"></a>scores <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="helpful-functions.html#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(siteID, target) <span class="sc">%&gt;%</span> </span>
<span id="cb63-6"><a href="helpful-functions.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(score, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb63-7"><a href="helpful-functions.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 3</span></span>
<span id="cb63-8"><a href="helpful-functions.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID target      mean_score</span></span>
<span id="cb63-9"><a href="helpful-functions.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb63-10"><a href="helpful-functions.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 BARC   oxygen           0.677</span></span>
<span id="cb63-11"><a href="helpful-functions.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 BARC   temperature    NaN    </span></span>
<span id="cb63-12"><a href="helpful-functions.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 POSE   oxygen           0.676</span></span>
<span id="cb63-13"><a href="helpful-functions.html#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 POSE   temperature      1.42</span></span></code></pre></div>
</div>
<div id="validate-a-forecast-file" class="section level3 hasAnchor" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Validate a forecast file<a href="helpful-functions.html#validate-a-forecast-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Validating a forecast file runs the same automated checks as the EFI
server, verifying that the data is in the correct format for the
appropriate challenge. Helpful errors or warnings will displayed on any
invalid formats. Note that the validator accepts files in <code>.csv</code>
(optionally compressed as <code>.csv.gz</code>) or netcdf.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="helpful-functions.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">forecast_output_validator</span>(forecast_file)</span>
<span id="cb64-2"><a href="helpful-functions.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; aquatics-2021-03-17-example_null.csv.gz</span></span>
<span id="cb64-3"><a href="helpful-functions.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file name is correct</span></span>
<span id="cb64-4"><a href="helpful-functions.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb64-5"><a href="helpful-functions.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb64-6"><a href="helpful-functions.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb64-7"><a href="helpful-functions.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time = col_date(format = &quot;&quot;),</span></span>
<span id="cb64-8"><a href="helpful-functions.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID = col_character(),</span></span>
<span id="cb64-9"><a href="helpful-functions.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   statistic = col_character(),</span></span>
<span id="cb64-10"><a href="helpful-functions.html#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   oxygen = col_double(),</span></span>
<span id="cb64-11"><a href="helpful-functions.html#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   temperature = col_double()</span></span>
<span id="cb64-12"><a href="helpful-functions.html#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb64-13"><a href="helpful-functions.html#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ target variables found</span></span>
<span id="cb64-14"><a href="helpful-functions.html#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistics column</span></span>
<span id="cb64-15"><a href="helpful-functions.html#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: mean</span></span>
<span id="cb64-16"><a href="helpful-functions.html#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: sd</span></span>
<span id="cb64-17"><a href="helpful-functions.html#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has siteID column</span></span>
<span id="cb64-18"><a href="helpful-functions.html#cb64-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has time column</span></span>
<span id="cb64-19"><a href="helpful-functions.html#cb64-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has correct time column</span></span>
<span id="cb64-20"><a href="helpful-functions.html#cb64-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div id="generate-forecast-metadata-in-eml" class="section level3 hasAnchor" number="11.1.5">
<h3><span class="header-section-number">11.1.5</span> Generate forecast metadata in EML<a href="helpful-functions.html#generate-forecast-metadata-in-eml" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See [Metadata]</p>
</div>
<div id="access-efi-snapshots-of-noaa-forecasts-at-neon-sites" class="section level3 hasAnchor" number="11.1.6">
<h3><span class="header-section-number">11.1.6</span> Access EFI snapshots of NOAA forecasts at NEON sites<a href="helpful-functions.html#access-efi-snapshots-of-noaa-forecasts-at-neon-sites" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many forecasts will want to make use of weather forecasts as potential
drivers. EFI downscales NOAA GEFS 35-day forecast products at each NEON
site and makes this data available. These helper functions provide
convenient access for downloading and stacking the individual forecast
files.</p>
<p>See <a href="met_inputs.html#met_inputs">Meteorology Inputs</a> for the functions</p>
</div>
<div id="neon4cast-submit" class="section level3 hasAnchor" number="11.1.7">
<h3><span class="header-section-number">11.1.7</span> Submit a forecast<a href="helpful-functions.html#neon4cast-submit" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you are ready to submit your forecast to EFI:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="helpful-functions.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">submit</span>(forecast_file)</span>
<span id="cb65-2"><a href="helpful-functions.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; aquatics-2021-03-17-example_null.csv.gz</span></span>
<span id="cb65-3"><a href="helpful-functions.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file name is correct</span></span>
<span id="cb65-4"><a href="helpful-functions.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb65-5"><a href="helpful-functions.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb65-6"><a href="helpful-functions.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb65-7"><a href="helpful-functions.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time = col_date(format = &quot;&quot;),</span></span>
<span id="cb65-8"><a href="helpful-functions.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID = col_character(),</span></span>
<span id="cb65-9"><a href="helpful-functions.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   statistic = col_character(),</span></span>
<span id="cb65-10"><a href="helpful-functions.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   oxygen = col_double(),</span></span>
<span id="cb65-11"><a href="helpful-functions.html#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   temperature = col_double()</span></span>
<span id="cb65-12"><a href="helpful-functions.html#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb65-13"><a href="helpful-functions.html#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ target variables found</span></span>
<span id="cb65-14"><a href="helpful-functions.html#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistics column</span></span>
<span id="cb65-15"><a href="helpful-functions.html#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: mean</span></span>
<span id="cb65-16"><a href="helpful-functions.html#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: sd</span></span>
<span id="cb65-17"><a href="helpful-functions.html#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has siteID column</span></span>
<span id="cb65-18"><a href="helpful-functions.html#cb65-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has time column</span></span>
<span id="cb65-19"><a href="helpful-functions.html#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has correct time column</span></span></code></pre></div>
<p>Ideally you should include the optional <code>metadata =</code> argument with your
metadata file.</p>
</div>
</div>
<div id="neonstore-package" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> neonstore package<a href="helpful-functions.html#neonstore-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The neonstore package is located at <a href="https://github.com/eco4cast/neon4cast" class="uri">https://github.com/eco4cast/neon4cast</a></p>
<p><code>neonstore</code> provides quick access and persistent storage of NEON data tables. <code>neonstore</code> emphasizes simplicity and a clean data provenance trail, see Provenance section below.</p>
<!-- badges: start -->
<p><a href="https://github.com/cboettig/neonstore/actions"><img src="https://github.com/cboettig/neonstore/workflows/R-CMD-check/badge.svg" alt="R build status" /></a>
<a href="https://codecov.io/gh/cboettig/neonstore?branch=master"><img src="https://codecov.io/gh/cboettig/neonstore/branch/master/graph/badge.svg" alt="Codecov test coverage" /></a>
<a href="https://CRAN.R-project.org/package=neonstore"><img src="https://www.r-pkg.org/badges/version/neonstore" alt="CRAN status" /></a>
<!-- badges: end --></p>
<p><code>neonstore</code> provides quick access and persistent storage of NEON data
tables. <code>neonstore</code> emphasizes simplicity and a clean data provenance
trail, see Provenance section below.</p>
<div id="installation-1" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Installation<a href="helpful-functions.html#installation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="helpful-functions.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb66-2"><a href="helpful-functions.html#cb66-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;cboettig/neonstore&quot;</span>)</span></code></pre></div>
</div>
<div id="quickstart" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Quickstart<a href="helpful-functions.html#quickstart" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="helpful-functions.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(neonstore)</span></code></pre></div>
<p>Discover data products of interest:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="helpful-functions.html#cb68-1" aria-hidden="true" tabindex="-1"></a>products <span class="ot">&lt;-</span> <span class="fu">neon_products</span>()</span>
<span id="cb68-2"><a href="helpful-functions.html#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="helpful-functions.html#cb68-3" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;Populations&quot;</span>, products<span class="sc">$</span>themes)</span>
<span id="cb68-4"><a href="helpful-functions.html#cb68-4" aria-hidden="true" tabindex="-1"></a>products[i, <span class="fu">c</span>(<span class="st">&quot;productCode&quot;</span>, <span class="st">&quot;productName&quot;</span>)]</span>
<span id="cb68-5"><a href="helpful-functions.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 50 x 2</span></span>
<span id="cb68-6"><a href="helpful-functions.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    productCode   productName                                              </span></span>
<span id="cb68-7"><a href="helpful-functions.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;                                                    </span></span>
<span id="cb68-8"><a href="helpful-functions.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 DP1.00033.001 Phenology images                                         </span></span>
<span id="cb68-9"><a href="helpful-functions.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 DP1.10003.001 Breeding landbird point counts                           </span></span>
<span id="cb68-10"><a href="helpful-functions.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 DP1.10010.001 Coarse downed wood log survey                            </span></span>
<span id="cb68-11"><a href="helpful-functions.html#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 DP1.10020.001 Ground beetle sequences DNA barcode                      </span></span>
<span id="cb68-12"><a href="helpful-functions.html#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 DP1.10022.001 Ground beetles sampled from pitfall traps                </span></span>
<span id="cb68-13"><a href="helpful-functions.html#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 DP1.10026.001 Plant foliar traits                                      </span></span>
<span id="cb68-14"><a href="helpful-functions.html#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 DP1.10033.001 Litterfall and fine woody debris production and chemistry</span></span>
<span id="cb68-15"><a href="helpful-functions.html#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 DP1.10038.001 Mosquito sequences DNA barcode                           </span></span>
<span id="cb68-16"><a href="helpful-functions.html#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 DP1.10041.001 Mosquito-borne pathogen status                           </span></span>
<span id="cb68-17"><a href="helpful-functions.html#cb68-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 DP1.10043.001 Mosquitoes sampled from CO2 traps                        </span></span>
<span id="cb68-18"><a href="helpful-functions.html#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 40 more rows</span></span>
<span id="cb68-19"><a href="helpful-functions.html#cb68-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb68-20"><a href="helpful-functions.html#cb68-20" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;bird&quot;</span>, products<span class="sc">$</span>keywords)</span>
<span id="cb68-21"><a href="helpful-functions.html#cb68-21" aria-hidden="true" tabindex="-1"></a>products[i, <span class="fu">c</span>(<span class="st">&quot;productCode&quot;</span>, <span class="st">&quot;productName&quot;</span>)]</span>
<span id="cb68-22"><a href="helpful-functions.html#cb68-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 2</span></span>
<span id="cb68-23"><a href="helpful-functions.html#cb68-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   productCode   productName                   </span></span>
<span id="cb68-24"><a href="helpful-functions.html#cb68-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                         </span></span>
<span id="cb68-25"><a href="helpful-functions.html#cb68-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 DP1.10003.001 Breeding landbird point counts</span></span></code></pre></div>
<p>Download all data files in the bird survey data products.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="helpful-functions.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_download</span>(<span class="st">&quot;DP1.10003.001&quot;</span>)</span>
<span id="cb69-2"><a href="helpful-functions.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   comparing hashes against local file index...</span></span>
<span id="cb69-3"><a href="helpful-functions.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   updating release manifest...</span></span></code></pre></div>
<p>View your store of NEON products:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="helpful-functions.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_index</span>()</span>
<span id="cb70-2"><a href="helpful-functions.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 854 x 15</span></span>
<span id="cb70-3"><a href="helpful-functions.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    product  site  table   type  ext   month timestamp           horizontalPosit…</span></span>
<span id="cb70-4"><a href="helpful-functions.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;                         &lt;dbl&gt;</span></span>
<span id="cb70-5"><a href="helpful-functions.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 DP1.100… BART  brd_co… basic csv   2015… 2020-12-23 14:17:30               NA</span></span>
<span id="cb70-6"><a href="helpful-functions.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 DP1.100… BART  brd_co… basic csv   2016… 2020-12-23 14:17:14               NA</span></span>
<span id="cb70-7"><a href="helpful-functions.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 DP1.100… BART  brd_co… basic csv   2017… 2020-12-23 14:17:36               NA</span></span>
<span id="cb70-8"><a href="helpful-functions.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 DP1.100… BART  brd_co… basic csv   2018… 2020-12-23 14:17:21               NA</span></span>
<span id="cb70-9"><a href="helpful-functions.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 DP1.100… BART  brd_co… basic csv   2019… 2020-12-23 14:17:45               NA</span></span>
<span id="cb70-10"><a href="helpful-functions.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 DP1.100… BART  brd_co… basic csv   2020… 2020-12-23 14:17:03               NA</span></span>
<span id="cb70-11"><a href="helpful-functions.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 DP1.100… BART  brd_co… basic csv   2020… 2020-12-23 14:17:41               NA</span></span>
<span id="cb70-12"><a href="helpful-functions.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 DP1.100… BART  brd_pe… basic csv   2015… 2020-12-23 14:17:30               NA</span></span>
<span id="cb70-13"><a href="helpful-functions.html#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 DP1.100… BART  brd_pe… basic csv   2016… 2020-12-23 14:17:14               NA</span></span>
<span id="cb70-14"><a href="helpful-functions.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 DP1.100… BART  brd_pe… basic csv   2017… 2020-12-23 14:17:36               NA</span></span>
<span id="cb70-15"><a href="helpful-functions.html#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 844 more rows, and 7 more variables: verticalPosition &lt;dbl&gt;,</span></span>
<span id="cb70-16"><a href="helpful-functions.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   samplingInterval &lt;chr&gt;, date_range &lt;chr&gt;, path &lt;chr&gt;, md5 &lt;chr&gt;,</span></span>
<span id="cb70-17"><a href="helpful-functions.html#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   crc32 &lt;chr&gt;, release &lt;chr&gt;</span></span></code></pre></div>
<p>These files will persist between sessions, so you only need to download
once or to retrieve updates. <code>neon_index()</code> can take arguments to filter
by product or pattern (regular expression) in table name,
e.g.<code>neon_index(table = "brd")</code>.</p>
<p>Once you determine the table of interest, you can read in all the
component tables into a single <code>data.frame</code></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="helpful-functions.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_read</span>(<span class="st">&quot;brd_countdata-expanded&quot;</span>)</span>
<span id="cb71-2"><a href="helpful-functions.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div id="database-backend" class="section level3 hasAnchor" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Database backend<a href="helpful-functions.html#database-backend" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>neonstore</code> now supports a backend relation database as well. Import
data from the raw downloaded files using <code>neon_store()</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="helpful-functions.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_store</span>(<span class="at">table =</span> <span class="st">&quot;brd_countdata-expanded&quot;</span>)</span>
<span id="cb72-2"><a href="helpful-functions.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; table brd_countdata-expanded not found, do you need to download first?</span></span></code></pre></div>
<p>Alternately, we could import all data tables associated with a given
product:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="helpful-functions.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_store</span>(<span class="at">product =</span> <span class="st">&quot;DP1.10003.001&quot;</span>)</span>
<span id="cb73-2"><a href="helpful-functions.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   importing brd_countdata-basic-DP1.10003.001...</span></span>
<span id="cb73-3"><a href="helpful-functions.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   importing brd_perpoint-basic-DP1.10003.001...</span></span></code></pre></div>
<p>Access an imported table using <code>neon_table()</code> instead of <code>neon_read()</code>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="helpful-functions.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_table</span>(<span class="st">&quot;brd_countdata&quot;</span>)</span>
<span id="cb74-2"><a href="helpful-functions.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 203,220 x 23</span></span>
<span id="cb74-3"><a href="helpful-functions.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    uid                namedLocation     domainID siteID plotID plotType  pointID</span></span>
<span id="cb74-4"><a href="helpful-functions.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  </span></span>
<span id="cb74-5"><a href="helpful-functions.html#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 01cef6c1-5851-407… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-6"><a href="helpful-functions.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 43990e9a-1412-427… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-7"><a href="helpful-functions.html#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 d4f59f3c-e3f1-4a7… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-8"><a href="helpful-functions.html#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 4ad44b7d-1eb6-465… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-9"><a href="helpful-functions.html#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 944a3e0e-08de-497… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-10"><a href="helpful-functions.html#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 d4cb0f22-923b-449… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb74-11"><a href="helpful-functions.html#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 0cc69b4f-650f-4f7… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb74-12"><a href="helpful-functions.html#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 c6367f2f-8b74-402… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb74-13"><a href="helpful-functions.html#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 406e8277-2c18-4b2… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb74-14"><a href="helpful-functions.html#cb74-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 ef879541-c8d5-41c… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb74-15"><a href="helpful-functions.html#cb74-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 203,210 more rows, and 16 more variables: startDate &lt;dttm&gt;,</span></span>
<span id="cb74-16"><a href="helpful-functions.html#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   eventID &lt;chr&gt;, pointCountMinute &lt;dbl&gt;, targetTaxaPresent &lt;chr&gt;,</span></span>
<span id="cb74-17"><a href="helpful-functions.html#cb74-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, vernacularName &lt;chr&gt;,</span></span>
<span id="cb74-18"><a href="helpful-functions.html#cb74-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   observerDistance &lt;dbl&gt;, detectionMethod &lt;chr&gt;, visualConfirmation &lt;chr&gt;,</span></span>
<span id="cb74-19"><a href="helpful-functions.html#cb74-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   sexOrAge &lt;chr&gt;, clusterSize &lt;dbl&gt;, clusterCode &lt;chr&gt;, identifiedBy &lt;chr&gt;,</span></span>
<span id="cb74-20"><a href="helpful-functions.html#cb74-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   file &lt;chr&gt;</span></span></code></pre></div>
<p>Access the remote database using <code>neon_db()</code>. This is a <code>DBIConnection</code>
that can easily be used with <code>dplyr</code> functions like <code>tbl()</code> or
<code>filter()</code>.<br />
Remember that <code>dplyr</code> translates these into SQL queries that run
directly on the database.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="helpful-functions.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb75-2"><a href="helpful-functions.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb75-3"><a href="helpful-functions.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb75-4"><a href="helpful-functions.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb75-5"><a href="helpful-functions.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb75-6"><a href="helpful-functions.html#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb75-7"><a href="helpful-functions.html#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb75-8"><a href="helpful-functions.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb75-9"><a href="helpful-functions.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb75-10"><a href="helpful-functions.html#cb75-10" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">neon_db</span>()</span>
<span id="cb75-11"><a href="helpful-functions.html#cb75-11" aria-hidden="true" tabindex="-1"></a>brd <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&quot;brd_countdata-basic-DP1.10003.001&quot;</span>)</span>
<span id="cb75-12"><a href="helpful-functions.html#cb75-12" aria-hidden="true" tabindex="-1"></a>brd <span class="sc">%&gt;%</span> <span class="fu">filter</span>(siteID <span class="sc">==</span> <span class="st">&quot;ORNL&quot;</span>)</span>
<span id="cb75-13"><a href="helpful-functions.html#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8,797 x 23</span></span>
<span id="cb75-14"><a href="helpful-functions.html#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    uid                namedLocation     domainID siteID plotID plotType  pointID</span></span>
<span id="cb75-15"><a href="helpful-functions.html#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  </span></span>
<span id="cb75-16"><a href="helpful-functions.html#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 33425600-9ce1-4a9… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-17"><a href="helpful-functions.html#cb75-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 faf5ee98-43e9-40f… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-18"><a href="helpful-functions.html#cb75-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2dc63a4a-3da1-4e0… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-19"><a href="helpful-functions.html#cb75-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 7952192b-55b4-48f… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-20"><a href="helpful-functions.html#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 41bf843e-3433-4d0… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-21"><a href="helpful-functions.html#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 e88d8ada-e43a-409… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-22"><a href="helpful-functions.html#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 04604bac-dd88-4d1… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-23"><a href="helpful-functions.html#cb75-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 05a8d535-3f59-413… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-24"><a href="helpful-functions.html#cb75-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 b5cccafa-acbf-41e… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-25"><a href="helpful-functions.html#cb75-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 63d9e30e-ab6c-41b… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb75-26"><a href="helpful-functions.html#cb75-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8,787 more rows, and 16 more variables: startDate &lt;dttm&gt;,</span></span>
<span id="cb75-27"><a href="helpful-functions.html#cb75-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   eventID &lt;chr&gt;, pointCountMinute &lt;dbl&gt;, targetTaxaPresent &lt;chr&gt;,</span></span>
<span id="cb75-28"><a href="helpful-functions.html#cb75-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, vernacularName &lt;chr&gt;,</span></span>
<span id="cb75-29"><a href="helpful-functions.html#cb75-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   observerDistance &lt;dbl&gt;, detectionMethod &lt;chr&gt;, visualConfirmation &lt;chr&gt;,</span></span>
<span id="cb75-30"><a href="helpful-functions.html#cb75-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   sexOrAge &lt;chr&gt;, clusterSize &lt;dbl&gt;, clusterCode &lt;chr&gt;, identifiedBy &lt;chr&gt;,</span></span>
<span id="cb75-31"><a href="helpful-functions.html#cb75-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   file &lt;chr&gt;</span></span></code></pre></div>
<p>Note that we need to include the product name in the table name when
accessing the database, as table names alone may not be unique. RStudio
users can also list and explore all tables interactively in the
Connections pane in RStudio using <code>neon_pane()</code>.</p>
</div>
<div id="note-on-api-limits" class="section level3 hasAnchor" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> Note on API limits<a href="helpful-functions.html#note-on-api-limits" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If <code>neon_download()</code> exceeds the API request limit (with or without the
token), <code>neonstore</code> will simply pause for the required amount of time to
avoid rate-limit-based errors.</p>
<p><a href="https://data.neonscience.org/data-api/rate-limiting/#api-tokens">The NEON API now rate-limits
requests.</a>.
Using a personal token will increase the number of requests you can make
before encountering this delay. See link for directions on registering
for a token. Then pass this token in <code>.token</code> argument of
<code>neon_download()</code>, or for frequent use, add this token as an
environmental variable, <code>NEON_DATA</code> to your local <code>.Renviron</code> file in
your user’s home directory. <code>neon_download()</code> must first query each the
API of each NEON site which collects that product, for each month the
product is collected.</p>
<p>(It would be much more efficient on the NEON server if the API could
take queries of the from <code>/data/&lt;product&gt;/&lt;site&gt;</code>, and pool the results,
rather than require each month of sampling separately!)</p>
</div>
<div id="non-stacking-files-and-low-level-interface" class="section level3 hasAnchor" number="11.2.5">
<h3><span class="header-section-number">11.2.5</span> Non-stacking files and low-level interface<a href="helpful-functions.html#non-stacking-files-and-low-level-interface" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At it’s core, <code>neonstore</code> is simply a mechanism to download files from
the NEON API. While the <code>.csv</code> files from the Observation Systems (OS,
e.g. bird count surveys), and Instrument Systems (e.g. aquatic sensors)
are typically stacked into large tables, other products, such as the
<code>.laz</code> and <code>.tif</code> images produced by the airborne observation platform
LIDAR and cameras may require a different approach.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="helpful-functions.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in a large file list for illustration purposes</span></span>
<span id="cb76-2"><a href="helpful-functions.html#cb76-2" aria-hidden="true" tabindex="-1"></a>cper_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://minio.thelio.carlboettiger.info/shared-data/neon_data_catalog.csv.gz&quot;</span>)</span>
<span id="cb76-3"><a href="helpful-functions.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Registered S3 methods overwritten by &#39;readr&#39;:</span></span>
<span id="cb76-4"><a href="helpful-functions.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   method           from </span></span>
<span id="cb76-5"><a href="helpful-functions.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   format.col_spec  vroom</span></span>
<span id="cb76-6"><a href="helpful-functions.html#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.col_spec   vroom</span></span>
<span id="cb76-7"><a href="helpful-functions.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.collector  vroom</span></span>
<span id="cb76-8"><a href="helpful-functions.html#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.date_names vroom</span></span>
<span id="cb76-9"><a href="helpful-functions.html#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.locale     vroom</span></span>
<span id="cb76-10"><a href="helpful-functions.html#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   str.col_spec     vroom</span></span>
<span id="cb76-11"><a href="helpful-functions.html#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb76-12"><a href="helpful-functions.html#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb76-13"><a href="helpful-functions.html#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb76-14"><a href="helpful-functions.html#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   crc32 = col_character(),</span></span>
<span id="cb76-15"><a href="helpful-functions.html#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name = col_character(),</span></span>
<span id="cb76-16"><a href="helpful-functions.html#cb76-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   size = col_double(),</span></span>
<span id="cb76-17"><a href="helpful-functions.html#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   url = col_character()</span></span>
<span id="cb76-18"><a href="helpful-functions.html#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb76-19"><a href="helpful-functions.html#cb76-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-20"><a href="helpful-functions.html#cb76-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Typically one would read all files in local store, e.g. list.file(neon_dir())</span></span>
<span id="cb76-21"><a href="helpful-functions.html#cb76-21" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">neon_filename_parser</span>(cper_data<span class="sc">$</span>name)</span></code></pre></div>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="helpful-functions.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb77-2"><a href="helpful-functions.html#cb77-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">count</span>(EXT, <span class="at">sort=</span><span class="cn">TRUE</span>)</span>
<span id="cb77-3"><a href="helpful-functions.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 13 x 2</span></span>
<span id="cb77-4"><a href="helpful-functions.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    EXT       n</span></span>
<span id="cb77-5"><a href="helpful-functions.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb77-6"><a href="helpful-functions.html#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 csv   38816</span></span>
<span id="cb77-7"><a href="helpful-functions.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 &lt;NA&gt;   8938</span></span>
<span id="cb77-8"><a href="helpful-functions.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 zip    4197</span></span>
<span id="cb77-9"><a href="helpful-functions.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 tif    3994</span></span>
<span id="cb77-10"><a href="helpful-functions.html#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 txt    3359</span></span>
<span id="cb77-11"><a href="helpful-functions.html#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 xml    3316</span></span>
<span id="cb77-12"><a href="helpful-functions.html#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 kml    1155</span></span>
<span id="cb77-13"><a href="helpful-functions.html#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 dbf    1100</span></span>
<span id="cb77-14"><a href="helpful-functions.html#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 prj    1100</span></span>
<span id="cb77-15"><a href="helpful-functions.html#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 shp    1100</span></span>
<span id="cb77-16"><a href="helpful-functions.html#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 shx    1100</span></span>
<span id="cb77-17"><a href="helpful-functions.html#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 h5     1093</span></span>
<span id="cb77-18"><a href="helpful-functions.html#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 laz     330</span></span></code></pre></div>
<p>We can take a look at all <code>laz</code> LIDAR files:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="helpful-functions.html#cb78-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="helpful-functions.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EXT <span class="sc">==</span> <span class="st">&quot;laz&quot;</span>)</span>
<span id="cb78-3"><a href="helpful-functions.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 330 x 31</span></span>
<span id="cb78-4"><a href="helpful-functions.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NEON  DOM   SITE  DPL   PRNUM REV   DESC  YYYY_MM PKGTYPE GENTIME EXT   name </span></span>
<span id="cb78-5"><a href="helpful-functions.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;</span></span>
<span id="cb78-6"><a href="helpful-functions.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-7"><a href="helpful-functions.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-8"><a href="helpful-functions.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-9"><a href="helpful-functions.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-10"><a href="helpful-functions.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  uncl… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-11"><a href="helpful-functions.html#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-12"><a href="helpful-functions.html#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-13"><a href="helpful-functions.html#cb78-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-14"><a href="helpful-functions.html#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-15"><a href="helpful-functions.html#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  uncl… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb78-16"><a href="helpful-functions.html#cb78-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 320 more rows, and 19 more variables: MISC &lt;chr&gt;, HOR &lt;chr&gt;,</span></span>
<span id="cb78-17"><a href="helpful-functions.html#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   VER &lt;chr&gt;, TMI &lt;chr&gt;, YYYY_MM_DD &lt;chr&gt;, DATE_RANGE &lt;chr&gt;, FLHTSTRT &lt;chr&gt;,</span></span>
<span id="cb78-18"><a href="helpful-functions.html#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   EHCCCCCC &lt;chr&gt;, IMAGEDATETIME &lt;chr&gt;, NNNN &lt;chr&gt;, NNN &lt;chr&gt;, R &lt;chr&gt;,</span></span>
<span id="cb78-19"><a href="helpful-functions.html#cb78-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   FLIGHTSTRT &lt;chr&gt;, EEEEEE &lt;chr&gt;, NNNNNNN &lt;chr&gt;, FLHTDATE &lt;chr&gt;,</span></span>
<span id="cb78-20"><a href="helpful-functions.html#cb78-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   FFFFFF &lt;chr&gt;, README &lt;lgl&gt;, COMPRESSION &lt;lgl&gt;</span></span></code></pre></div>
<p>Note that many of the airborne observation platform (AOP) products, such
as these LIDAR files, do not include the PRNUM or REV components that make up part of the <code>productCode</code>s used in the NEON <code>product</code> tables.</p>
</div>
</div>
<div id="efistandards-package" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> EFIstandards package<a href="helpful-functions.html#efistandards-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- badges: start -->
<p><a href="https://github.com/cboettig/forecast-standards/actions"><img src="https://github.com/cboettig/forecast-standards/workflows/R-CMD-check/badge.svg" alt="R build status" /></a>
<a href="https://CRAN.R-project.org/package=EFIstandards"><img src="https://www.r-pkg.org/badges/version/EFIstandards" alt="CRAN status" /></a>
<a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental" /></a>
<!-- badges: end --></p>
<p>This package summarizes the proposed community standards for the common formatting and archiving of ecological forecasts developed by the Ecological Forecasting Initiative (EFI). Such open standards are intended to promote interoperability and facilitate forecast adoption, distribution, validation, and synthesis.</p>
<div id="output-files" class="section level3 hasAnchor" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Output Files:<a href="helpful-functions.html#output-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EFI has proposed a three-tiered approach reflecting trade-offs in forecast data volume and technical expertise. The prefered output file format is in netCDF following standard CF conventions for dimensions and variable naming conventions, with ensemble member as a dimension where appropriate. The second-tier option is a semi-long CSV format, with state variables as columns and each row representing a unique issue datetime, prediction datetime, location, ensemble member, etc. The third-tier option is similar to option 2, but each row represents a specific summary statistic (mean, upper/lower CI) rather than individual ensemble members.</p>
</div>
<div id="output-metadata" class="section level3 hasAnchor" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Output Metadata:<a href="helpful-functions.html#output-metadata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EFI’s proposed metadata represents an expansion upon the Ecological Metadata Language (EML), with two key differences. First, is the specification of additonalMetadata tags to store forecast specific information (e.g. uncertainty propagation and data assimilation) as well as some summary information about model complexity, included uncertainties, etc. designed to facilitate cross-forecast synthesis. Second, a number of EML tags (e.g. temporal resolution, output variables) are considered a required part of forecast metadata that are otherwise optional in base EML.</p>
<p>This package includes an R tool for validating these EML files.</p>
</div>
<div id="archiving" class="section level3 hasAnchor" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Archiving:<a href="helpful-functions.html#archiving" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>EFI envisions a three-tiered approach to forecast archiving. At the most basic level, forecasts should be archived before new observations become available (not possible for hindcasts), preferably in a FAIR public archive that permits forecasts to be uploaded automatically, allows metadata to be searchable, and assigns a DOI. Second, in addition to this the codes used to generate forecasts should also be archived, preferably in an open archive or code repository (e.g. Github) that can be assigned a DOI. Finally, in addition to output and code archiving, we encourage running forecast workflows to be archived using virtualization approaches, such as Docker or Singularity containers.</p>
</div>
<div id="vignettes" class="section level3 hasAnchor" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Vignettes:<a href="helpful-functions.html#vignettes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This package includes a number of vignettes illustrating the application of the EFI standards to different forecasts</p>
</div>
<div id="documentation" class="section level3 hasAnchor" number="11.3.5">
<h3><span class="header-section-number">11.3.5</span> Documentation:<a href="helpful-functions.html#documentation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A more detailed description of the EFI standard can be found at <a href="https://shorturl.at/irMQW">https://shorturl.at/irMQW</a>. Note that the Standard is a work in progress. If you find issues as you are applying them, let us know at <a href="mailto:eco4cast.initiative@gmail.com" class="email">eco4cast.initiative@gmail.com</a>.</p>
<p>Pkgdown rendered documentation of functions and vignettes can be found at <a href="https://eco4cast.github.io/EFIstandards/" class="uri">https://eco4cast.github.io/EFIstandards/</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="met_inputs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="using-the-challenge-in-classes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
